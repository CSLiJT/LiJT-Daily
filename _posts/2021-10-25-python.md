---
title: Python踩坑记录&小技巧(持续更新)
author: LiJT
aside:
  toc: true
sidebar:
  nav: layouts
show_author_profile: true
tags: Python coding 持续更新
article_header:
  type: cover
key: python20211025
modify_date: 2022-02-23
---

## Numpy
- np.unique 可以同时获取unique key和频数
```python
outcome_s, frequency_s=np.unique(samples,return_counts=True)
```
- np.intersect1d 可以获取两个一维数组的交集
```python
A=np.array([1,2,3,4,5])
B=np.array([3,4,6,0,7])
C=np.intersect1d(A,B) # C=[3,4]
```

<!--more-->

## PyTorch
- 重要的事情说三遍：
  - 不要将维数设为0！
  - 不要将维数设为0！
  - 不要将维度设为0！
```
在深度学习的消融实验中，常常需要去掉某个模块来验证其有效性。不要简单地将位数设为0！维度最少要为1.这是因为在某些版本的torch中，如果模型参数是 (N,0) 维的，那么使用torch.save()时会保存N个相应的参数值；但在torch.load()阶段，模型期望接收参数数量为0，所以模型load不进去！
```

- 指定load模型的目标设备
  `torch.load(map_location=device)`


## 其他
### tqdm
- tqdm 可以枚举迭代操作，同时显示进度条——再也不用每隔多少步输出一次结果了！
- 以下为ipython演示结果

```python
In [22]: import tqdm
    ...: li = [i for i in range(999999)]
    ...: mn = 99999999
    ...: for elem in tqdm.tqdm(li,'progress:'):
    ...:   mn = min(mn,elem)
    ...:
progress:: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 999999/999999 [00:00<00:00, 2086298.02it/s]

```